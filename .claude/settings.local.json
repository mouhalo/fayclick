{
  "permissions": {
    "allow": [
      "Bash(git commit:*)",
      "Bash(npm run build:*)",
      "Bash(npm run deploy:build:*)",
      "Bash(git add:*)",
      "Bash(git checkout:*)",
      "Bash(git merge:*)",
      "Bash(git push:*)",
      "Bash(git restore:*)",
      "Bash(npm run deploy:*)",
      "Bash(gh pr create --title \"ðŸš€ ImplÃ©mentation PWA ComplÃ¨te avec Installation Intelligente\" --body \"$(cat <<''EOF''\n## ðŸŽ¯ Objectif\nImplÃ©mentation complÃ¨te du systÃ¨me PWA avec installation intelligente, tout en prÃ©servant l''accÃ¨s public aux factures.\n\n## âœ¨ Nouvelles FonctionnalitÃ©s\n\n### ðŸ“± SystÃ¨me PWA Complet\n- **Service Worker avancÃ©** avec stratÃ©gies de cache optimisÃ©es\n- **Installation intelligente** avec dÃ©tection automatique\n- **Mode offline** avec page dÃ©diÃ©e et reconnexion automatique\n- **Notifications push** et synchronisation en arriÃ¨re-plan\n\n### ðŸ§  Installation Intelligente\n- **Hook `useInstallPrompt`** : Gestion complÃ¨te avec localStorage\n- **Modal moderne** : Design attractif avec animations Framer Motion\n- **Logique respectueuse** : Max 3 fermetures, dÃ©lai de 7 jours entre prompts\n- **Badge discret** : Indicateur d''installation aprÃ¨s 5 secondes\n\n### ðŸ”’ Protection Pages Publiques\n- **Exclusion automatique** des pages factures (`/facture`, `/fay`)\n- **AccÃ¨s prÃ©servÃ©** pour login/register/inscription-success\n- **Pas de contrainte d''installation** pour les visiteurs\n\n## ðŸ› ï¸ Composants AjoutÃ©s\n\n### Core PWA\n- `public/service-worker.js` - Service Worker avec cache intelligent\n- `hooks/useInstallPrompt.ts` - Hook de gestion d''installation\n- `components/pwa/InstallPromptModal.tsx` - Modal d''installation\n- `components/pwa/PWAInstallProvider.tsx` - Provider global PWA\n- `app/offline/page.tsx` - Page mode offline\n\n### Configuration\n- `manifest.json` amÃ©liorÃ© avec toutes les capacitÃ©s PWA\n- `next.config.ts` avec headers de sÃ©curitÃ©\n- `app/layout.tsx` intÃ©gration PWAInstallProvider\n\n## ðŸ“‹ StratÃ©gies de Cache\n\n### Cache-First (Assets Statiques)\n- CSS, JS, images, fonts\n- Assets Next.js (_next/static, _next/image)\n- Performance optimale\n\n### Network-First (Pages)\n- Pages dynamiques avec fallback cache\n- APIs toujours rÃ©seau avec fallback\n- Pages publiques accessibles offline\n\n## ðŸŽ¨ ExpÃ©rience Utilisateur\n\n### Installation Proactive\n```typescript\n// Logique d''installation intelligente\n- Prompt aprÃ¨s 2 secondes sur pages privÃ©es\n- Badge permanent aprÃ¨s 5 secondes si non installÃ©\n- Respect des prÃ©fÃ©rences utilisateur\n- Exclusion automatique pages publiques\n```\n\n### Mode Offline\n- Page dÃ©diÃ©e avec animations\n- DÃ©tection de reconnexion automatique\n- Boutons de retry et retour accueil\n- Status indicator en temps rÃ©el\n\n## ðŸ”§ Configuration Technique\n\n### Manifest PWA\n- Nom : \"FayClick - La Super App des Marchands\"\n- Mode standalone avec fallbacks\n- Raccourcis : Dashboard, Factures, Clients\n- Support partage natif\n\n### Service Worker\n- Cache statique : assets essentiels\n- Cache dynamique : pages visitÃ©es\n- Sync background pour donnÃ©es\n- Notifications push ready\n\n## ðŸ§ª Tests Ã  Effectuer\n\n### Installation PWA\n1. Ouvrir Chrome DevTools > Application > Service Workers\n2. VÃ©rifier l''enregistrement du Service Worker\n3. Tester le prompt d''installation sur pages privÃ©es\n4. VÃ©rifier l''exclusion sur `/facture?token=xxx`\n\n### Mode Offline\n1. DÃ©sactiver la connexion rÃ©seau\n2. Naviguer vers `/offline`\n3. Tester la reconnexion automatique\n4. VÃ©rifier le cache des pages visitÃ©es\n\n### Performance\n1. Lighthouse PWA score\n2. Temps de chargement avec cache\n3. Fonctionnement standalone\n\n## ðŸ“± CompatibilitÃ©\n- âœ… Chrome/Edge (Desktop & Mobile)\n- âœ… Safari iOS (Add to Home Screen)\n- âœ… Firefox (avec limitations)\n- âœ… Samsung Internet\n- âœ… Mode standalone complet\n\n## ðŸš€ DÃ©ploiement\nAprÃ¨s merge, utiliser `npm run deploy:build` pour dÃ©ploiement complet.\n\n## ðŸ” Points de VÃ©rification\n- [ ] Service Worker s''enregistre correctement\n- [ ] Modal d''installation apparaÃ®t sur pages privÃ©es\n- [ ] Pages publiques accessibles sans installation\n- [ ] Mode offline fonctionnel\n- [ ] Cache des assets optimisÃ©\n- [ ] Score Lighthouse PWA > 90\n\nðŸ¤– Generated with [Claude Code](https://claude.ai/code)\nEOF\n)\")",
      "Bash(gh pr create:*)",
      "Bash(npx next lint:*)",
      "Bash(git branch:*)",
      "Bash(set NODE_TLS_REJECT_UNAUTHORIZED=0)",
      "Bash(npm run lint:*)",
      "Bash(npm install:*)",
      "Bash(git reset:*)",
      "Bash(cat:*)",
      "Bash(tee:*)",
      "Bash(xargs cat:*)",
      "Bash(powershell:*)",
      "Bash(npx tsc:*)",
      "Bash(curl -s -X POST http://localhost:3000/api/sql -H \"Content-Type: application/json\" -d '{\"\"application\"\":\"\"fayclick\"\",\"\"query\"\":\"\"SELECT * FROM check_user_credentials\\(''''admin@tech24.fay''''::varchar, ''''777301221@''''::varchar\\);\"\"}')",
      "Bash(python3:*)",
      "Bash(curl:*)",
      "Bash(node:*)",
      "mcp__chrome-devtools__fill_form",
      "mcp__chrome-devtools__wait_for",
      "mcp__chrome-devtools__evaluate_script",
      "mcp__chrome-devtools__take_snapshot",
      "mcp__chrome-devtools__fill",
      "mcp__chrome-devtools__navigate_page",
      "Bash(tail:*)",
      "Bash(cd:*)",
      "mcp__chrome-devtools__list_pages",
      "mcp__chrome-devtools__click",
      "Bash(cd:)"
    ],
    "deny": [],
    "ask": []
  }
}
